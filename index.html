<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Elrendar Fellowship — Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <img src="assets/art/crest2.png" alt="Elven Sigil" class="sigil-overlay" />
  <header class="banner">
    <h1 class="site-title">The Elrendar Fellowship</h1>
  </header>
  <nav class="menu-bar">
    <ul>
      <li><a href="index.html" aria-current="page">Home</a></li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle">About ▾</a>
        <ul class="dropdown-menu">
          <li><a href="about.html">At A Glance</a></li>
          <li><a href="conduct.html">Code of Conduct</a></li>
          <li><a href="faq.html">FAQ</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle">Roleplay ▾</a>
        <ul class="dropdown-menu">
          <li><a href="history.html">History</a></li>
          <li><a href="system.html">Rule Book</a></li>
          <li><a href="monsterguide.html">Monster Manual</a></li>
          <li><a href="monsterbuilder.html">Encounter Builder</a></li>
          <li><a href="dm-assist.html">DM Event Assistant</a></li>
        </ul>
      </li>
      <li><a href="members.html">Members</a></li>
      <li><a href="apply.html">Apply</a></li>
    </ul>
  </nav>

  <!-- Content -->
  <main class="content">
    <section class="text-block">
      <p>
        <h1>The High Home beckons to its children; will you answer the call?</h1>
        The Elrendar Fellowship has emerged from its treasured obscurity in order to better aid the nation of Quel'Thalas and its many diasporic tribes. Once an fabled order of sorcerers intent on educating the populace on the responsible use of magic, the order was shattered during the Fall of Quel'Thalas to the Scourge. In recent years, however, its ranks have slowly reforms, and now the order stands ready to help lead the elven people to a more prosperous future.
        <br><br>
        The Fellowship is, first and foremost, a heavy roleplay guild that is both cross faction and cross server. It is also a social and content focused guild, with a well balanced blending of the elements in order to offer an immersive and thrilling experience in Warcraft.
        <br><br>
        Members can expect and enjoy both long form and short campaigns, immersive roleplay centered PVE content and traditional non-RP content content as well.
      </p>
    </section>

    <img src="assets/art/quelthalas1.png" alt="quelthalas" class="showcase-image" />
  </main>

  <!-- Splash (2-slide carousel) -->
  <div id="campaign-splash" class="splash-backdrop" data-active="y" data-hero="off" hidden>
    <div class="splash-modal" role="dialog" aria-modal="true" aria-labelledby="splash-title-1">
      <button class="splash-close" aria-label="Close">×</button>
      <button class="carousel-nav prev" aria-label="Previous slide" title="Previous">‹</button>
      <button class="carousel-nav next" aria-label="Next slide" title="Next">›</button>
      <div class="splash-viewport">
        <div class="splash-track">
          <!-- Slide 1 -->
          <section class="splash-slide" data-slide="0">
            <img class="splash-bg" src="assets/art/splashart/nathrezim1.png" alt="" />
            <div class="splash-band" aria-hidden="true"></div>
            <div class="splash-copy">
              <h2 id="splash-title-1" class="splash-title">
                New Campaign 9/6 - What Lurks in the Shadows
              </h2>
            </div>
            <div class="splash-descbox">
              <p class="splash-desc">
                The Magistry of Silvermoon is in a frenzy: breaches at sanctums kept quiet; the lingering taint of fel energy carefully masked; the threat of a traitor now undeniable.
                <br><br>The Fellowship has one task: uncover the truth, and put an end to the threat.
              </p>
            </div>

            <img class="splash-hero" src="assets/art/crest2.png" alt="Campaign art" />
          </section>

          <!-- Slide 2 -->
          <section class="splash-slide" data-slide="1">
            <img class="splash-bg" src="assets/art/splashart/quelthalas1.png" alt="" />
            <div class="splash-band" aria-hidden="true"></div>

            <div class="splash-copy">
              <h2 id="splash-title-2" class="splash-title gold">
                Recruitment Now Open!
              </h2>
            </div>

            <div class="splash-descbox">
              <p class="splash-desc">
                The Fellowship has stepped forward at last, and now readies itself to aid the elven people, and return to its historic duties once more.
                <br><br>Will you rise to the challenge and help guide the elven people to a brighter future?
              </p>
            </div>

            <img class="splash-hero" src="assets/art/crest2.png" alt="Campaign art" />
          </section>
        </div>
      </div>

      <div class="carousel-dots" id="splashDots" aria-hidden="true"></div>

      <label class="splash-dontshow">
        <input type="checkbox" id="splash-hide-7"> Don’t show again for 7 days.
      </label>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <p>© 2025 The Elrendar Fellowship Guild</p>
    <p>Blizzard Entertainment, Inc. and all respective artists retain all rights to the names, images and other intellectual property featured here of their own creation.</p>
    <p>This site is a social guild landing webpage and is not endorsed or affiliated with Blizzard Entertainment.</p>
  </footer>

  <link rel="preload" as="image" href="assets/art/splashart/nathrezim1.png">
  <link rel="preload" as="image" href="assets/art/splashart/quelthalas1.png">

  <script>
    (function () {
      const ROOT = document.getElementById('campaign-splash');
      if (!ROOT) return;
      const CLOSE = ROOT.querySelector('.splash-close');
      const DONT7 = ROOT.querySelector('#splash-hide-7');

      const hideUntil = Number(localStorage.getItem('elf/splash/hideUntil') || 0);
      if (Date.now() >= hideUntil) ROOT.hidden = false;

      function armFreeze(){ if (!ROOT.hidden) setTimeout(()=>ROOT.classList.add('freeze'), 5200); }
      if (!ROOT.hidden) armFreeze();
      new MutationObserver(()=>{ if (!ROOT.hidden) armFreeze(); })
        .observe(ROOT, { attributes:true, attributeFilter:['hidden'] });

      CLOSE?.addEventListener('click', () => {
        if (DONT7?.checked) {
          localStorage.setItem('elf/splash/hideUntil', String(Date.now() + 7*24*60*60*1000));
        }
        ROOT.hidden = true;
      });
    })();
  </script>

  <!-- Splash slider + autoplay -->
  <script>
    (function(){
      const ROOT   = document.getElementById('campaign-splash');
      if (!ROOT) return;

      const modal  = ROOT.querySelector('.splash-modal');
      const track  = ROOT.querySelector('.splash-track');
      const slides = Array.from(ROOT.querySelectorAll('.splash-slide'));
      const btnPrev= ROOT.querySelector('.carousel-nav.prev');
      const btnNext= ROOT.querySelector('.carousel-nav.next');
      const view   = ROOT.querySelector('.splash-viewport');
      const dotsBox= ROOT.querySelector('#splashDots');

      const AUTOPLAY_DELAY = 6000;
      const RESUME_AFTER   = 7000;
      const SWIPE_PX       = 48;
      const WHEEL_PX       = 80;
      const reduceMotion   = matchMedia('(prefers-reduced-motion: reduce)').matches;

      // dots
      dotsBox.innerHTML = '';
      slides.forEach((_, i) => {
        const b = document.createElement('button');
        b.type = 'button'; b.className = 'carousel-dot';
        b.setAttribute('aria-label', `Go to slide ${i+1}`);
        b.addEventListener('click', () => { pauseThenResume(); show(i); });
        dotsBox.appendChild(b);
      });

      let idx = 0, vw = 0;
      let autoTimer = null, resumeTimer = null, dir = 1;

      function measure(){
        vw = view.clientWidth || modal.clientWidth || 0;
        track.style.transform = `translate3d(${-idx * vw}px,0,0)`;
      }
      function updateUI(){
        const title = slides[idx].querySelector('.splash-copy h2[id]');
        if (title) modal.setAttribute('aria-labelledby', title.id);
        if (btnPrev) btnPrev.hidden = (idx === 0);
        if (btnNext) btnNext.hidden = (idx === slides.length - 1);
        dotsBox.querySelectorAll('.carousel-dot')
          .forEach((d,i)=>d.classList.toggle('is-active', i===idx));
      }
      function show(n){
        idx = Math.max(0, Math.min(slides.length-1, n));
        track.style.transform = `translate3d(${-idx * vw}px,0,0)`;
        updateUI();
      }

      function autoTick(){
        if (ROOT.hidden || slides.length < 2) return;
        let next = idx + dir;
        if (next < 0 || next > slides.length-1) { dir *= -1; next = idx + dir; }
        show(next);
      }
      function autoStart(){ if (!reduceMotion && slides.length>1){ clearInterval(autoTimer); autoTimer=setInterval(autoTick, AUTOPLAY_DELAY);} }
      function autoStop(){ clearInterval(autoTimer); autoTimer=null; }
      function pauseThenResume(){ autoStop(); clearTimeout(resumeTimer); resumeTimer=setTimeout(autoStart, RESUME_AFTER); }

      btnPrev?.addEventListener('click', ()=>{ pauseThenResume(); show(idx-1); });
      btnNext?.addEventListener('click', ()=>{ pauseThenResume(); show(idx+1); });
      document.addEventListener('keydown', (e)=>{ if (ROOT.hidden) return;
        if (e.key==='ArrowLeft')  { pauseThenResume(); show(idx-1); }
        if (e.key==='ArrowRight') { pauseThenResume(); show(idx+1); }
      });

      // pointer/touch
      let startX=null, tracking=false;
      const getX = ev => (ev.touches ? ev.touches[0].clientX : ev.clientX);
      view.addEventListener('pointerdown', e=>{ tracking=true; startX=getX(e); autoStop(); });
      view.addEventListener('pointerup',   e=>{ if (!tracking) return; tracking=false;
        const dx=getX(e)-startX; if (Math.abs(dx)>SWIPE_PX) show(idx+(dx<0?1:-1)); pauseThenResume();
      });
      view.addEventListener('touchstart', e=>{ tracking=true; startX=getX(e); autoStop(); }, {passive:true});
      view.addEventListener('touchend',   e=>{ if (!tracking) return; tracking=false;
        const dx=e.changedTouches[0].clientX-startX; if (Math.abs(dx)>SWIPE_PX) show(idx+(dx<0?1:-1)); pauseThenResume();
      }, {passive:true});

      // trackpad (horizontal wheel)
      let wheelDX=0, wheelTimer=null;
      view.addEventListener('wheel', (e)=>{ if (ROOT.hidden) return;
        if (Math.abs(e.deltaX)<=Math.abs(e.deltaY)) return;
        autoStop(); wheelDX+=e.deltaX; clearTimeout(wheelTimer);
        wheelTimer=setTimeout(()=>{ if (Math.abs(wheelDX)>WHEEL_PX) show(idx+(wheelDX>0?1:-1)); wheelDX=0; pauseThenResume(); }, 60);
      }, {passive:true});

      // visibility / hidden
      new MutationObserver(()=>{ ROOT.hidden ? autoStop() : pauseThenResume(); })
        .observe(ROOT, {attributes:true, attributeFilter:['hidden']});
      document.addEventListener('visibilitychange', ()=>{ document.hidden ? autoStop() : pauseThenResume(); });

      window.addEventListener('resize', measure);
      measure(); show(0); autoStart();
    })();
  </script>
</body>
</html>
